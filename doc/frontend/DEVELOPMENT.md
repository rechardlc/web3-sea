# SEA GameFi å‰ç«¯å¼€å‘æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [ç¯å¢ƒé…ç½®](#ç¯å¢ƒé…ç½®)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [ç»„ä»¶å¼€å‘è§„èŒƒ](#ç»„ä»¶å¼€å‘è§„èŒƒ)
- [Web3 é›†æˆæŒ‡å—](#web3-é›†æˆæŒ‡å—)
- [æ ·å¼æŒ‡å—](#æ ·å¼æŒ‡å—)
- [çŠ¶æ€ç®¡ç†](#çŠ¶æ€ç®¡ç†)
- [API å’Œæ•°æ®å¤„ç†](#api-å’Œæ•°æ®å¤„ç†)
- [æµ‹è¯•](#æµ‹è¯•)
- [éƒ¨ç½²](#éƒ¨ç½²)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## é¡¹ç›®æ¦‚è¿°

SEA GameFi æ˜¯ä¸€ä¸ªåŸºäºåŒºå—é“¾çš„ Play-to-Earn æ¸¸æˆå¹³å°ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è´­ä¹°ç›²ç›’è·å¾—é±¼ç±» NFTï¼Œé€šè¿‡è´¨æŠ¼ NFT èµšå– SEA ä»£å¸ï¼Œå¹¶é€šè¿‡å‡æ˜Ÿå’Œè¿›åŒ–æå‡ NFT ä»·å€¼ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ£ **ç›²ç›’è´­ä¹°**ï¼šä½¿ç”¨ ETH è´­ä¹°ç›²ç›’ï¼Œéšæœºè·å¾—é±¼ç±» NFT
- ğŸŸ **NFT ç®¡ç†**ï¼šæŸ¥çœ‹ã€ç®¡ç†æ‹¥æœ‰çš„é±¼ç±» NFT
- âš“ **è´¨æŠ¼æŒ–çŸ¿**ï¼šå°† NFT è´¨æŠ¼åˆ°ä¸åŒæ± å­èµšå– SEA ä»£å¸
- â­ **å‡æ˜Ÿç³»ç»Ÿ**ï¼šé€šè¿‡è´¨æŠ¼æå‡ NFT æ˜Ÿçº§ï¼ˆ0-9 æ˜Ÿï¼‰
- ğŸ”„ **è¿›åŒ–ç³»ç»Ÿ**ï¼š9 æ˜Ÿ NFT å¯è¿›åŒ–ä¸ºæ›´é«˜ Tier
- ğŸ›’ **NFT å¸‚åœº**ï¼šä¹°å– NFTï¼Œäº¤æ˜“æ‰‹ç»­è´¹éƒ¨åˆ†é”€æ¯

---

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

- **Next.js 15** - React å…¨æ ˆæ¡†æ¶ï¼Œæ”¯æŒ SSR/SSG
- **React 19** - UI åº“
- **TypeScript 5.6** - ç±»å‹å®‰å…¨

### Web3 é›†æˆ

- **Wagmi 2.12** - React Hooks for Ethereum
- **Viem 2.21** - ä»¥å¤ªåŠå·¥å…·åº“
- **RainbowKit 2.3** - é’±åŒ…è¿æ¥ UI
- **@tanstack/react-query 5.59** - æ•°æ®è·å–å’Œç¼“å­˜
- **Ethers.js 6.13** - ä»¥å¤ªåŠäº¤äº’åº“

### UI å’Œæ ·å¼

- **Tailwind CSS 3.4** - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **Framer Motion 11.5** - åŠ¨ç”»åº“
- **Lucide React** - å›¾æ ‡åº“
- **Radix UI** - æ— æ ·å¼ã€å¯è®¿é—®çš„ UI ç»„ä»¶

### çŠ¶æ€ç®¡ç†

- **Zustand 5.0** - è½»é‡çº§çŠ¶æ€ç®¡ç†
- **React Query** - æœåŠ¡ç«¯çŠ¶æ€ç®¡ç†

### è¡¨å•å’ŒéªŒè¯

- **React Hook Form 7.53** - è¡¨å•ç®¡ç†
- **Zod 3.23** - æ¨¡å¼éªŒè¯
- **@hookform/resolvers** - è¡¨å•éªŒè¯è§£æå™¨

### å·¥å…·åº“

- **date-fns 4.1** - æ—¥æœŸå¤„ç†
- **clsx** - ç±»åå·¥å…·
- **tailwind-merge** - Tailwind ç±»ååˆå¹¶
- **class-variance-authority** - ç»„ä»¶å˜ä½“ç®¡ç†

### æ•°æ®å¯è§†åŒ–

- **Recharts 2.12** - å›¾è¡¨åº“

---

## ç¯å¢ƒé…ç½®

### ç³»ç»Ÿè¦æ±‚

- **Node.js**: 18.17+ (æ¨è 20+)
- **pnpm**: 8.0+ (æ¨èæœ€æ–°ç‰ˆæœ¬)
- **Git**: 2.30+

### å®‰è£… pnpm

å¦‚æœå°šæœªå®‰è£… pnpmï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å®‰è£…ï¼š

```bash
# ä½¿ç”¨ npm å®‰è£…
npm install -g pnpm

# æˆ–ä½¿ç”¨ corepack (Node.js 16.13+)
corepack enable
corepack prepare pnpm@latest --activate

# éªŒè¯å®‰è£…
pnpm --version
```

### é¡¹ç›®å…‹éš†å’Œå®‰è£…æ­¥éª¤

#### æ–¹å¼ä¸€ï¼šå…‹éš†æ•´ä¸ªé¡¹ç›®ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®ä»“åº“
git clone <repository-url>
cd web3-preview

# 2. å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬æ™ºèƒ½åˆçº¦å’Œå‰ç«¯ï¼‰
pnpm install

# 3. è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# 4. ç¼–è¯‘æ™ºèƒ½åˆçº¦ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰
cd ..
pnpm run compile

# 5. å¤åˆ¶ ABI æ–‡ä»¶åˆ°å‰ç«¯
cd frontend
pnpm run copy-abis

# 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run dev
```

#### æ–¹å¼äºŒï¼šä»…å®‰è£…å‰ç«¯ä¾èµ–

```bash
# 1. å…‹éš†é¡¹ç›®ä»“åº“
git clone <repository-url>
cd web3-preview/frontend

# 2. å®‰è£…å‰ç«¯ä¾èµ–
pnpm install

# 3. ç¡®ä¿æ™ºèƒ½åˆçº¦å·²ç¼–è¯‘ï¼Œç„¶åå¤åˆ¶ ABI
pnpm run copy-abis

# 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run dev
```

#### é¡¹ç›®ç»“æ„è¯´æ˜

```
web3-preview/                    # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ contracts/                   # æ™ºèƒ½åˆçº¦ç›®å½•
â”‚   â”œâ”€â”€ FishNFT.sol
â”‚   â”œâ”€â”€ StakingPool.sol
â”‚   â”œâ”€â”€ Marketplace.sol
â”‚   â”œâ”€â”€ SEAToken.sol
â”‚   â””â”€â”€ SEAGovToken.sol
â”œâ”€â”€ frontend/                    # å‰ç«¯ç›®å½•
â”‚   â”œâ”€â”€ app/                     # Next.js åº”ç”¨
â”‚   â”œâ”€â”€ components/              # React ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/                   # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ lib/                     # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ abis/                    # åˆçº¦ ABI
â”‚   â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ scripts/                     # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ test/                        # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ hardhat.config.js            # Hardhat é…ç½®
â”œâ”€â”€ package.json                 # æ ¹ package.json
â”œâ”€â”€ FishGameFi.md               # é¡¹ç›®è®¾è®¡æ–‡æ¡£
â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
```

> **é‡è¦æç¤º**ï¼š
> - å‰ç«¯ä¾èµ–ä½äº `frontend/` ç›®å½•
> - æ™ºèƒ½åˆçº¦ä½äº `contracts/` ç›®å½•
> - é¡¹ç›®æ ¹ç›®å½•çš„ `package.json` åŒ…å«åˆçº¦ç¼–è¯‘å’Œéƒ¨ç½²è„šæœ¬
> - å‰ç«¯éœ€è¦å…ˆç¼–è¯‘åˆçº¦å¹¶å¤åˆ¶ ABI æ–‡ä»¶æ‰èƒ½æ­£å¸¸å·¥ä½œ

### é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env.local` æ–‡ä»¶ï¼ˆåœ¨ `frontend/` ç›®å½•ä¸‹ï¼‰ï¼š

```bash
# åˆçº¦åœ°å€ï¼ˆéƒ¨ç½²åæ›´æ–°ï¼‰
NEXT_PUBLIC_FISH_NFT_ADDRESS=0x...
NEXT_PUBLIC_SEA_TOKEN_ADDRESS=0x...
NEXT_PUBLIC_SEA_GOV_TOKEN_ADDRESS=0x...
NEXT_PUBLIC_STAKING_POOL_ADDRESS=0x...
NEXT_PUBLIC_MARKETPLACE_ADDRESS=0x...

# é“¾ ID
NEXT_PUBLIC_CHAIN_ID=1337

# IPFS Gatewayï¼ˆå¯é€‰ï¼‰
NEXT_PUBLIC_IPFS_GATEWAY=https://ipfs.io/ipfs/

# WalletConnect Project ID
NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID=your_project_id
```

### è·å– WalletConnect Project ID

- è®¿é—® https://cloud.walletconnect.com
- åˆ›å»ºæ–°é¡¹ç›®
- å¤åˆ¶ Project ID åˆ° `.env.local`

### å¤åˆ¶åˆçº¦ ABI

åœ¨ç¼–è¯‘æ™ºèƒ½åˆçº¦åï¼Œéœ€è¦å°† ABI æ–‡ä»¶å¤åˆ¶åˆ°å‰ç«¯ç›®å½•ï¼š

```bash
# ä»é¡¹ç›®æ ¹ç›®å½•ç¼–è¯‘åˆçº¦å
cd frontend
pnpm run copy-abis
```

æˆ–æ‰‹åŠ¨å¤åˆ¶ï¼š

```bash
cp ../artifacts/contracts/FishNFT.sol/FishNFT.json ./abis/FishNFT.json.ts
cp ../artifacts/contracts/StakingPool.sol/StakingPool.json ./abis/StakingPool.json.ts
cp ../artifacts/contracts/Marketplace.sol/Marketplace.json ./abis/Marketplace.json.ts
cp ../artifacts/contracts/SEAToken.sol/SEAToken.json ./abis/SEAToken.json.ts
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
cd frontend
pnpm run dev
```

è®¿é—® http://localhost:3000

### å®Œæ•´å®‰è£…æµç¨‹ç¤ºä¾‹

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd web3-preview

# 2. å®‰è£…æ‰€æœ‰ä¾èµ–
pnpm install

# 3. ç¼–è¯‘æ™ºèƒ½åˆçº¦
pnpm run compile

# 4. è¿›å…¥å‰ç«¯ç›®å½•å¹¶é…ç½®
cd frontend
cp .env.example .env.local
# ç¼–è¾‘ .env.local å¡«å…¥åˆçº¦åœ°å€å’Œ WalletConnect Project ID

# 5. å¤åˆ¶ ABI æ–‡ä»¶
pnpm run copy-abis

# 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run dev
```

---

## é¡¹ç›®ç»“æ„

```
frontend/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/                   # éœ€è¦é’±åŒ…è¿æ¥çš„é¡µé¢ç»„ï¼ˆæœªæ¥æ‰©å±•ï¼‰
â”‚   â”œâ”€â”€ page.tsx                  # é¦–é¡µ
â”‚   â”œâ”€â”€ blindbox/                 # ç›²ç›’è´­ä¹°é¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ my-nfts/                  # æˆ‘çš„ NFT é¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ staking/                  # è´¨æŠ¼é¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ marketplace/              # å¸‚åœºé¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ layout.tsx                # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ providers.tsx            # Wagmi æä¾›è€…
â”‚   â””â”€â”€ globals.css               # å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ components/                   # å¯å¤ç”¨ç»„ä»¶ï¼ˆæœªæ¥æ‰©å±•ï¼‰
â”‚   â”œâ”€â”€ ui/                       # åŸºç¡€ UI ç»„ä»¶
â”‚   â”œâ”€â”€ web3/                     # Web3 ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ nft/                      # NFT ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ staking/                  # è´¨æŠ¼ç›¸å…³ç»„ä»¶
â”‚   â””â”€â”€ marketplace/             # å¸‚åœºç›¸å…³ç»„ä»¶
â”‚
â”œâ”€â”€ hooks/                        # è‡ªå®šä¹‰ Hooksï¼ˆæœªæ¥æ‰©å±•ï¼‰
â”‚   â”œâ”€â”€ useFishNFT.ts
â”‚   â”œâ”€â”€ useStaking.ts
â”‚   â””â”€â”€ useMarketplace.ts
â”‚
â”œâ”€â”€ stores/                       # Zustand çŠ¶æ€ç®¡ç†ï¼ˆæœªæ¥æ‰©å±•ï¼‰
â”‚   â”œâ”€â”€ nftStore.ts
â”‚   â””â”€â”€ stakingStore.ts
â”‚
â”œâ”€â”€ lib/                          # å·¥å…·å‡½æ•°å’Œé…ç½®
â”‚   â”œâ”€â”€ contracts/               # åˆçº¦äº¤äº’å°è£…
â”‚   â”œâ”€â”€ utils/                    # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ constants/               # å¸¸é‡å®šä¹‰
â”‚
â”œâ”€â”€ types/                        # TypeScript ç±»å‹å®šä¹‰ï¼ˆæœªæ¥æ‰©å±•ï¼‰
â”‚   â”œâ”€â”€ nft.ts
â”‚   â””â”€â”€ staking.ts
â”‚
â”œâ”€â”€ abis/                         # åˆçº¦ ABI
â”‚   â”œâ”€â”€ FishNFT.json.ts
â”‚   â”œâ”€â”€ StakingPool.json.ts
â”‚   â”œâ”€â”€ Marketplace.json.ts
â”‚   â””â”€â”€ SEAToken.json.ts
â”‚
â”œâ”€â”€ config/                       # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ contracts.ts             # åˆçº¦åœ°å€é…ç½®
â”‚
â”œâ”€â”€ utils/                        # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ helpers.ts               # è¾…åŠ©å‡½æ•°
â”‚
â”œâ”€â”€ scripts/                      # è„šæœ¬
â”‚   â””â”€â”€ copy-abis.js             # ABI å¤åˆ¶è„šæœ¬
â”‚
â”œâ”€â”€ public/                       # é™æ€èµ„æº
â”‚   â”œâ”€â”€ images/                  # å›¾ç‰‡èµ„æº
â”‚   â”‚   â”œâ”€â”€ fish/                # é±¼ç±»å›¾ç‰‡
â”‚   â”‚   â””â”€â”€ icons/               # å›¾æ ‡
â”‚   â””â”€â”€ sounds/                  # éŸ³æ•ˆï¼ˆæœªæ¥æ‰©å±•ï¼‰
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ next.config.js
â””â”€â”€ postcss.config.js
```

---

## å¼€å‘æŒ‡å—

### å¼€å‘å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm start

# ä»£ç æ£€æŸ¥
pnpm run lint

# å¤åˆ¶ ABI æ–‡ä»¶
pnpm run copy-abis
```

> **æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä½¿ç”¨ pnpm ä½œä¸ºåŒ…ç®¡ç†å™¨ã€‚å¦‚æœä½¿ç”¨ npm æˆ– yarnï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¾èµ–å®‰è£…é—®é¢˜ã€‚å»ºè®®ç»Ÿä¸€ä½¿ç”¨ pnpmã€‚

### ä»£ç è§„èŒƒ

1. **æ–‡ä»¶å‘½å**
   - ç»„ä»¶æ–‡ä»¶ä½¿ç”¨ PascalCaseï¼š`FishCard.tsx`
   - Hook æ–‡ä»¶ä½¿ç”¨ camelCase å¹¶ä»¥ `use` å¼€å¤´ï¼š`useFishNFT.ts`
   - å·¥å…·æ–‡ä»¶ä½¿ç”¨ camelCaseï¼š`helpers.ts`
   - ç±»å‹æ–‡ä»¶ä½¿ç”¨ camelCaseï¼š`nft.ts`

2. **ç»„ä»¶ç»“æ„**

```typescript
'use client' // å¦‚æœæ˜¯å®¢æˆ·ç«¯ç»„ä»¶

import { ... } from '...'

// ç±»å‹å®šä¹‰
interface ComponentProps {
  // ...
}

// ç»„ä»¶
export function Component({ prop1, prop2 }: ComponentProps) {
  // Hooks
  // çŠ¶æ€
  // å‰¯ä½œç”¨
  // äº‹ä»¶å¤„ç†
  // æ¸²æŸ“
  return (...)
}
```

3. **TypeScript è§„èŒƒ**
   - ä½¿ç”¨æ˜ç¡®çš„ç±»å‹å®šä¹‰
   - é¿å…ä½¿ç”¨ `any`
   - ä½¿ç”¨æ¥å£å®šä¹‰ Props
   - å¯¼å‡ºç±»å‹ä¾›å…¶ä»–æ–‡ä»¶ä½¿ç”¨

4. **å¯¼å…¥é¡ºåº**
   ```typescript
   // 1. React å’Œ Next.js
   import { useState } from 'react'
   import Link from 'next/link'
   
   // 2. ç¬¬ä¸‰æ–¹åº“
   import { useAccount } from 'wagmi'
   import { motion } from 'framer-motion'
   
   // 3. å†…éƒ¨ç»„ä»¶
   import { Button } from '@/components/ui/button'
   
   // 4. å·¥å…·å‡½æ•°å’Œç±»å‹
   import { formatAddress } from '@/utils/helpers'
   import type { FishNFT } from '@/types/nft'
   
   // 5. æ ·å¼
   import './styles.css'
   ```

---

## ç»„ä»¶å¼€å‘è§„èŒƒ

### åŸºç¡€ç»„ä»¶ç»“æ„

```typescript
'use client'

import { useState } from 'react'
import { motion } from 'framer-motion'
import { cn } from '@/lib/utils'

interface ButtonProps {
  children: React.ReactNode
  variant?: 'primary' | 'secondary'
  onClick?: () => void
  disabled?: boolean
  className?: string
}

export function Button({
  children,
  variant = 'primary',
  onClick,
  disabled = false,
  className,
}: ButtonProps) {
  return (
    <motion.button
      whileHover={{ scale: 1.05 }}
      whileTap={{ scale: 0.95 }}
      onClick={onClick}
      disabled={disabled}
      className={cn(
        'px-4 py-2 rounded-lg font-medium',
        variant === 'primary' && 'bg-blue-600 text-white',
        variant === 'secondary' && 'bg-gray-200 text-gray-800',
        disabled && 'opacity-50 cursor-not-allowed',
        className
      )}
    >
      {children}
    </motion.button>
  )
}
```

### ç»„ä»¶æœ€ä½³å®è·µ

1. **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
2. **å¯å¤ç”¨æ€§**ï¼šé€šè¿‡ Props å®ç°ç»„ä»¶å¤ç”¨
3. **å¯è®¿é—®æ€§**ï¼šä½¿ç”¨è¯­ä¹‰åŒ– HTML å’Œ ARIA å±æ€§
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨ `React.memo` å’Œ `useMemo` ä¼˜åŒ–æ¸²æŸ“
5. **é”™è¯¯è¾¹ç•Œ**ï¼šå¤„ç†é”™è¯¯çŠ¶æ€å’Œè¾¹ç•Œæƒ…å†µ

---

## Web3 é›†æˆæŒ‡å—

### Wagmi é…ç½®

Wagmi é…ç½®åœ¨ `app/providers.tsx` ä¸­ï¼š

```typescript
import { WagmiProvider } from 'wagmi'
import { getDefaultConfig } from '@rainbow-me/rainbowkit'
import { mainnet, sepolia, hardhat, localhost } from 'wagmi/chains'

const config = getDefaultConfig({
  appName: 'SEA GameFi',
  projectId: process.env.NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID!,
  chains: [hardhat, localhost, sepolia, mainnet],
  ssr: true,
})
```

### å¸¸ç”¨ Hooks

#### 1. è¿æ¥é’±åŒ…

```typescript
import { useAccount, useConnect, useDisconnect } from 'wagmi'

function WalletButton() {
  const { address, isConnected } = useAccount()
  const { connect, connectors } = useConnect()
  const { disconnect } = useDisconnect()

  if (isConnected) {
    return (
      <div>
        <p>å·²è¿æ¥: {address}</p>
        <button onClick={() => disconnect()}>æ–­å¼€è¿æ¥</button>
      </div>
    )
  }

  return (
    <div>
      {connectors.map((connector) => (
        <button
          key={connector.uid}
          onClick={() => connect({ connector })}
        >
          è¿æ¥ {connector.name}
        </button>
      ))}
    </div>
  )
}
```

#### 2. è¯»å–åˆçº¦æ•°æ®

```typescript
import { useReadContract } from 'wagmi'
import { CONTRACT_ADDRESSES } from '@/config/contracts'
import FishNFTABI from '@/abis/FishNFT.json'

function FishBalance() {
  const { address } = useAccount()
  const { data: balance } = useReadContract({
    address: CONTRACT_ADDRESSES.FishNFT,
    abi: FishNFTABI,
    functionName: 'balanceOf',
    args: [address!],
    query: {
      enabled: !!address,
    },
  })

  return <div>NFT æ•°é‡: {balance?.toString()}</div>
}
```

#### 3. å†™å…¥åˆçº¦ï¼ˆäº¤æ˜“ï¼‰

```typescript
import { useWriteContract, useWaitForTransactionReceipt } from 'wagmi'
import { CONTRACT_ADDRESSES } from '@/config/contracts'
import StakingPoolABI from '@/abis/StakingPool.json'

function StakingButton({ tokenId }: { tokenId: bigint }) {
  const { writeContract, data: hash, isPending } = useWriteContract()
  const { isLoading: isConfirming, isSuccess } = useWaitForTransactionReceipt({
    hash,
  })

  const handleStake = () => {
    writeContract({
      address: CONTRACT_ADDRESSES.StakingPool,
      abi: StakingPoolABI,
      functionName: 'stake',
      args: [tokenId],
    })
  }

  return (
    <button
      onClick={handleStake}
      disabled={isPending || isConfirming}
    >
      {isPending && 'ç­‰å¾…ç¡®è®¤...'}
      {isConfirming && 'å¤„ç†ä¸­...'}
      {isSuccess && 'è´¨æŠ¼æˆåŠŸï¼'}
      {!isPending && !isConfirming && !isSuccess && 'è´¨æŠ¼'}
    </button>
  )
}
```

#### 4. ç›‘å¬äº‹ä»¶

```typescript
import { useWatchContractEvent } from 'wagmi'
import { CONTRACT_ADDRESSES } from '@/config/contracts'
import FishNFTABI from '@/abis/FishNFT.json'

function useNFTMinted() {
  useWatchContractEvent({
    address: CONTRACT_ADDRESSES.FishNFT,
    abi: FishNFTABI,
    eventName: 'Transfer',
    onLogs(logs) {
      console.log('NFT å·²é“¸é€ :', logs)
    },
  })
}
```

### é”™è¯¯å¤„ç†

```typescript
import { useWriteContract } from 'wagmi'
import { toast } from 'sonner' // æˆ–ä½¿ç”¨å…¶ä»– toast åº“

function useStakingWithErrorHandling() {
  const { writeContract, error } = useWriteContract({
    onError: (error) => {
      if (error.message.includes('user rejected')) {
        toast.error('ç”¨æˆ·å–æ¶ˆäº†äº¤æ˜“')
      } else if (error.message.includes('insufficient funds')) {
        toast.error('ä½™é¢ä¸è¶³')
      } else {
        toast.error('äº¤æ˜“å¤±è´¥: ' + error.message)
      }
    },
  })

  return { writeContract, error }
}
```

---

## æ ·å¼æŒ‡å—

### Tailwind CSS ä½¿ç”¨

1. **ä½¿ç”¨å·¥å…·ç±»**

```typescript
<div className="flex items-center justify-between p-4 bg-white rounded-lg shadow-md">
  <h2 className="text-2xl font-bold text-gray-900">æ ‡é¢˜</h2>
  <button className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
    æŒ‰é’®
  </button>
</div>
```

2. **å“åº”å¼è®¾è®¡**

```typescript
<div className="
  grid
  grid-cols-1
  md:grid-cols-2
  lg:grid-cols-3
  gap-4
">
  {/* å†…å®¹ */}
</div>
```

3. **è‡ªå®šä¹‰ç±»åå·¥å…·**

```typescript
import { cn } from '@/lib/utils'

<div className={cn(
  'base-classes',
  condition && 'conditional-classes',
  className // å…è®¸å¤–éƒ¨ä¼ å…¥çš„ç±»å
)}>
```

### ä¸»é¢˜é¢œè‰²

åœ¨ `tailwind.config.ts` ä¸­å®šä¹‰ï¼š

```typescript
theme: {
  extend: {
    colors: {
      primary: {
        50: '#e6f7ff',
        500: '#1890ff',
        600: '#096dd9',
        900: '#002766',
      },
    },
  },
}
```

### åŠ¨ç”»ä½¿ç”¨

ä½¿ç”¨ Framer Motionï¼š

```typescript
import { motion } from 'framer-motion'

<motion.div
  initial={{ opacity: 0, y: 20 }}
  animate={{ opacity: 1, y: 0 }}
  exit={{ opacity: 0, y: -20 }}
  transition={{ duration: 0.3 }}
>
  å†…å®¹
</motion.div>
```

---

## çŠ¶æ€ç®¡ç†

### Zustand Store ç¤ºä¾‹

```typescript
// stores/nftStore.ts
import { create } from 'zustand'

interface NFTState {
  selectedNFT: FishNFT | null
  setSelectedNFT: (nft: FishNFT | null) => void
  nfts: FishNFT[]
  setNFTs: (nfts: FishNFT[]) => void
}

export const useNFTStore = create<NFTState>((set) => ({
  selectedNFT: null,
  setSelectedNFT: (nft) => set({ selectedNFT: nft }),
  nfts: [],
  setNFTs: (nfts) => set({ nfts }),
}))
```

### React Query ä½¿ç”¨

```typescript
import { useQuery } from '@tanstack/react-query'

function useFishNFTs(address: string) {
  return useQuery({
    queryKey: ['fishNFTs', address],
    queryFn: async () => {
      // è·å– NFT åˆ—è¡¨çš„é€»è¾‘
      return fetchNFTs(address)
    },
    enabled: !!address,
    refetchInterval: 30000, // 30ç§’åˆ·æ–°
  })
}
```

---

## API å’Œæ•°æ®å¤„ç†

### åˆçº¦æ•°æ®è·å–

```typescript
// lib/contracts/fishNFT.ts
import { readContract } from 'wagmi/actions'
import { CONTRACT_ADDRESSES } from '@/config/contracts'
import FishNFTABI from '@/abis/FishNFT.json'

export async function getFishNFT(tokenId: bigint) {
  const [tier, starLevel, durability, rarity] = await Promise.all([
    readContract({
      address: CONTRACT_ADDRESSES.FishNFT,
      abi: FishNFTABI,
      functionName: 'getTier',
      args: [tokenId],
    }),
    readContract({
      address: CONTRACT_ADDRESSES.FishNFT,
      abi: FishNFTABI,
      functionName: 'getStarLevel',
      args: [tokenId],
    }),
    // ... å…¶ä»–å±æ€§
  ])

  return {
    tokenId,
    tier,
    starLevel,
    durability,
    rarity,
  }
}
```

### å·¥å…·å‡½æ•°

```typescript
// lib/utils/format.ts
export function formatAddress(address: string): string {
  return `${address.slice(0, 6)}...${address.slice(-4)}`
}

export function formatBalance(balance: bigint, decimals: number = 18): string {
  return (Number(balance) / 10 ** decimals).toFixed(4)
}

export function formatTime(seconds: number): string {
  const hours = Math.floor(seconds / 3600)
  const minutes = Math.floor((seconds % 3600) / 60)
  return `${hours}å°æ—¶${minutes}åˆ†é’Ÿ`
}
```

---

## æµ‹è¯•

### å•å…ƒæµ‹è¯•ï¼ˆæœªæ¥æ‰©å±•ï¼‰

```typescript
// __tests__/utils/format.test.ts
import { formatAddress, formatBalance } from '@/lib/utils/format'

describe('formatAddress', () => {
  it('åº”è¯¥æ ¼å¼åŒ–åœ°å€', () => {
    expect(formatAddress('0x1234567890123456789012345678901234567890'))
      .toBe('0x1234...7890')
  })
})
```

### E2E æµ‹è¯•ï¼ˆæœªæ¥æ‰©å±•ï¼‰

ä½¿ç”¨ Playwright æˆ– Cypress è¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•ã€‚

---

## éƒ¨ç½²

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
pnpm run build
```

### ç¯å¢ƒå˜é‡é…ç½®

åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

- `NEXT_PUBLIC_FISH_NFT_ADDRESS`
- `NEXT_PUBLIC_SEA_TOKEN_ADDRESS`
- `NEXT_PUBLIC_STAKING_POOL_ADDRESS`
- `NEXT_PUBLIC_MARKETPLACE_ADDRESS`
- `NEXT_PUBLIC_CHAIN_ID`
- `NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID`

### éƒ¨ç½²å¹³å°

#### Vercelï¼ˆæ¨èï¼‰

1. è¿æ¥ GitHub ä»“åº“
2. é…ç½®ç¯å¢ƒå˜é‡
3. è‡ªåŠ¨éƒ¨ç½²

#### è‡ªå»ºæœåŠ¡å™¨

```bash
# æ„å»º
pnpm run build

# å¯åŠ¨
pnpm start
```

### æ€§èƒ½ä¼˜åŒ–

1. **å›¾ç‰‡ä¼˜åŒ–**ï¼šä½¿ç”¨ Next.js Image ç»„ä»¶
2. **ä»£ç åˆ†å‰²**ï¼šåŠ¨æ€å¯¼å…¥å¤§å‹ç»„ä»¶
3. **ç¼“å­˜ç­–ç•¥**ï¼šä½¿ç”¨ React Query ç¼“å­˜
4. **é™æ€èµ„æº**ï¼šä½¿ç”¨ CDN åŠ é€Ÿ

---

## å¸¸è§é—®é¢˜

### 1. é’±åŒ…è¿æ¥å¤±è´¥

**é—®é¢˜**ï¼šæ— æ³•è¿æ¥ MetaMask æˆ–å…¶ä»–é’±åŒ…

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿å®‰è£…äº†é’±åŒ…æ‰©å±•
- æ£€æŸ¥ç½‘ç»œé…ç½®æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ WalletConnect Project ID å·²é…ç½®

### 2. äº¤æ˜“å¤±è´¥

**é—®é¢˜**ï¼šåˆçº¦è°ƒç”¨å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ Gas è´¹ç”¨æ˜¯å¦å……è¶³
- ç¡®è®¤åˆçº¦åœ°å€æ­£ç¡®
- æ£€æŸ¥æ˜¯å¦å·²æˆæƒåˆçº¦æ“ä½œèµ„äº§
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### 3. ABI é”™è¯¯

**é—®é¢˜**ï¼šTypeScript ç±»å‹é”™è¯¯æˆ–è¿è¡Œæ—¶é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿ ABI æ–‡ä»¶å·²æ­£ç¡®å¤åˆ¶
- æ£€æŸ¥ ABI æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®
- é‡æ–°è¿è¡Œ `pnpm run copy-abis`

### 4. ç¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ

**é—®é¢˜**ï¼šç¯å¢ƒå˜é‡è¯»å–ä¸åˆ°

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿å˜é‡åä»¥ `NEXT_PUBLIC_` å¼€å¤´ï¼ˆå®¢æˆ·ç«¯å˜é‡ï¼‰
- é‡å¯å¼€å‘æœåŠ¡å™¨
- æ£€æŸ¥ `.env.local` æ–‡ä»¶ä½ç½®å’Œæ ¼å¼

### 5. ç±»å‹é”™è¯¯

**é—®é¢˜**ï¼šTypeScript ç±»å‹æ£€æŸ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿å®‰è£…äº†æ‰€æœ‰ç±»å‹å®šä¹‰åŒ…
- æ£€æŸ¥ `tsconfig.json` é…ç½®
- ä½¿ç”¨ `@ts-ignore` ä¸´æ—¶å¿½ç•¥ï¼ˆä¸æ¨èï¼‰

---

## æœ€ä½³å®è·µ

### 1. é”™è¯¯å¤„ç†

```typescript
try {
  await writeContract(...)
} catch (error) {
  if (error instanceof Error) {
    // å¤„ç†é”™è¯¯
    console.error(error.message)
  }
}
```

### 2. åŠ è½½çŠ¶æ€

```typescript
const { data, isLoading, error } = useQuery(...)

if (isLoading) return <LoadingSpinner />
if (error) return <ErrorMessage error={error} />
return <DataDisplay data={data} />
```

### 3. æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨ `React.memo` é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- ä½¿ç”¨ `useMemo` å’Œ `useCallback` ç¼“å­˜è®¡ç®—ç»“æœ
- åŠ¨æ€å¯¼å…¥å¤§å‹ç»„ä»¶
- ä½¿ç”¨ React Query ç¼“å­˜æ•°æ®

### 4. å¯è®¿é—®æ€§

- ä½¿ç”¨è¯­ä¹‰åŒ– HTML
- æ·»åŠ  ARIA æ ‡ç­¾
- ç¡®ä¿é”®ç›˜å¯¼èˆª
- æä¾›æ›¿ä»£æ–‡æœ¬

### 5. ä»£ç ç»„ç»‡

- ä¿æŒç»„ä»¶å°è€Œä¸“æ³¨
- æå–å¯å¤ç”¨é€»è¾‘åˆ° Hooks
- ä½¿ç”¨ç±»å‹å®šä¹‰æé«˜ä»£ç å¯è¯»æ€§
- æ·»åŠ å¿…è¦çš„æ³¨é‡Š

---

## å‚è€ƒèµ„æ–™

- [Next.js æ–‡æ¡£](https://nextjs.org/docs)
- [Wagmi æ–‡æ¡£](https://wagmi.sh)
- [RainbowKit æ–‡æ¡£](https://rainbowkit.com)
- [Tailwind CSS æ–‡æ¡£](https://tailwindcss.com/docs)
- [Framer Motion æ–‡æ¡£](https://www.framer.com/motion/)
- [React Query æ–‡æ¡£](https://tanstack.com/query/latest)

---

## æ›´æ–°æ—¥å¿—

### 2024-12
- åˆå§‹ç‰ˆæœ¬
- åŸºç¡€é¡µé¢å’ŒåŠŸèƒ½å®ç°
- Web3 é›†æˆå®Œæˆ

---

**æ–‡æ¡£ç»´æŠ¤è€…**ï¼šå¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**ï¼š2024-12

